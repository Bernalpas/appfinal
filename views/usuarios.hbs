<div
  id="carouselExampleIndicators"
  class="carousel slide container mx-auto"
  data-bs-ride="true"
>
  <div class="carousel-indicators">
    <button
      type="button"
      data-bs-target="#carouselExampleIndicators"
      data-bs-slide-to="0"
      class="active"
      aria-current="true"
      aria-label="Slide 1"
    ></button>
    <button
      type="button"
      data-bs-target="#carouselExampleIndicators"
      data-bs-slide-to="1"
      aria-label="Slide 2"
    ></button>
    <button
      type="button"
      data-bs-target="#carouselExampleIndicators"
      data-bs-slide-to="2"
      aria-label="Slide 3"
    ></button>
  </div>
  <div class="carousel-inner mx-auto">
    <div class="carousel-item active">
      <img
        src="https://www.lavoz.com.ar/resizer/8AJCS6Z9AZdcN_N0W24xSY_rjMk=/1023x1278/smart/cloudfront-us-east-1.images.arcpublishing.com/grupoclarin/OZOOPJ2XCBCH7LGSDKPVP4DC6U.jpg"
        class="d-block w-50"
        alt=""
      />
    </div>
    <div class="carousel-item">
      <img
        src="https://www.lavoz.com.ar/resizer/8AJCS6Z9AZdcN_N0W24xSY_rjMk=/1023x1278/smart/cloudfront-us-east-1.images.arcpublishing.com/grupoclarin/OZOOPJ2XCBCH7LGSDKPVP4DC6U.jpg"
        class="d-block w-50"
        alt=""
      />
    </div>
    <div class="carousel-item">
      <img
        src="https://www.lavoz.com.ar/resizer/8AJCS6Z9AZdcN_N0W24xSY_rjMk=/1023x1278/smart/cloudfront-us-east-1.images.arcpublishing.com/grupoclarin/OZOOPJ2XCBCH7LGSDKPVP4DC6U.jpg"
        class="d-block w-50"
        alt=""
      />
    </div>
  </div>
  <button
    class="carousel-control-prev"
    type="button"
    data-bs-target="#carouselExampleIndicators"
    data-bs-slide="prev"
  >
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button
    class="carousel-control-next"
    type="button"
    data-bs-target="#carouselExampleIndicators"
    data-bs-slide="next"
  >
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<div class="container mt-5">

    <div class="text-center m-5">
        <hr>
        <h2>
            Nómina de Usuarios
        </h2>
        <hr>
    </div>

  <table class="table table-striped" id="mytable">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Nombre</th>
        <th scope="col">Email</th>
        <th scope="col">Dirección</th>
        <th scope="col">Edad</th>
      </tr>
    </thead>
    <tbody>
{{!-- {{#each allUsers}}
      <tr>
        <th scope="row">{{ @index }} {{allUsers}}</th>
        <td>{{nombre}} {{allUsers}}</td>
        <td>{{email}} {{allUsers}}</td>
        <td>{{address}} {{allUsers}}</td>
        <td>{{age}} {{allUsers}}</td>
      </tr>
      {{/each}} --}}

      {{#each allUsers}}
      <tr>
        <th scope="row">{{ @index }} {{allUsers}}</th>
        <td>{{ nombre }} </td>
        <td>{{ email }} </td>
        <td>{{ address }} </td>
        <td>{{ age }} </td>
        <td>
          <a href="javascript:void(0);" class="btn btn-success me-4 edit" 
          data-id="{{ _id }}"
          data-nombre="{{ nombre }}" 
          data-email="{{email}}" 
          data-address="{{ address }}" 
          data-age="{{ age }}"
          >Update
          </a> 
          <a href="javascript:void(0);" class="btn btn-danger delete" 
          data-id="{{ _id }}"
          >Eliminar
          </a> 
        </td>
      </tr>
      {{/each}}

    </tbody>
  </table>
</div>



{{!-- Agregamos Modales para Actalizar y para Eliminar los datos --}}

{{!-- Modal para Actualizar Datos --}}

<form action="/usuarios" method="post" >
<div class="modal fade" id="EditModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="myModalLabel">Editar Usuario</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" data-bs-target="#my-modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
              <label for="recipient-name" class="col-form-label">Id</label>
              <input type="text" class="form-control id" id="id" name="id" required>
            </div>
            <div class="mb-3">
              <label for="recipient-name" class="col-form-label">Nombre</label>
              <input type="text" class="form-control nombre" id="nombre" name="nombre" required>
            </div>
            <div class="mb-3">
              <label for="recipient-name" class="col-form-label">Email</label>
              <input type="text" class="form-control email" id="email" name="email" required>
            </div>
            <div class="mb-3">
              <label for="recipient-name" class="col-form-label">Dirección</label>
              <input type="text" class="form-control address" id="address" name="address" required>
            </div>
            <div class="mb-3">
              <label for="recipient-name" class="col-form-label">Edad</label>
              <input type="number" class="form-control age" id="age" name="age" required>
            </div>
        </div>
        <div class="modal-footer">
          <input type="hidden" name="id" class="form-control" required>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-bs-target="#my-modal">Close</button>
          <button type="submit" class="btn btn-primary">Actualizar</button>
        </div>
      </div>
    </div>
  </div>
</form>



{{!-- Modal para Eliminar Datos --}}

        <form id="add-row-form" action="/delete" method="post">
            <div class="modal fade" id="DeleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="myModalLabel">Eliminar Usuario</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" data-bs-target="#my-modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body text-center">
                    <strong>¿Estás seguro de borrar este elemento?</strong>
                    </div>
                    <div class="modal-footer">
                    <input type="hidden" name="id" class="form-control" required>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-success">Eliminar</button>
                    </div>
                        </div>
                </div>
            </div>
        </form>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

{{!-- <script src="/assets/jquery.min.js"></script> --}}

{{!-- Función para Eliminar y Actualizar --}}

<script>
$(document).ready(function(){
    //Mostrar datos al modal para editar registro
 $('#mytable').on('click', '.edit', function(){
        let _id = $(this).data('id');
        let nombre = $(this).data('nombre');
        let email = $(this).data('email');
        let address = $(this).data('address');
        let age = $(this).data('age');
        $('#EditModal').modal('show');
        $('.id').val(_id);
        $('.nombre').val(nombre);
        $('.email').val(email);
        $('.address').val(address);
        $('.age').val(age);
    }) 

    // Modal DELETE     
    $('#mytable').on('click', '.delete', function(){
        let _id = $(this).data('id');
        $('#DeleteModal').modal('show');
    })
})

</script>